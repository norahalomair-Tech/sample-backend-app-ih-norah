services:
postgres:
  image: postgres:15
  environment:
    POSTGRES_DB: notes_db
    POSTGRES_USER: postgres
    POSTGRES_PASSWORD: password
  ports:
    - "5432:5432"
  volumes:
    - postgres_data:/var/lib/postgresql/data
  networks:
    - app-network

backend:
  build: ./
  ports:
    - "3001:3001"
  environment:
    PORT: 3001
    DATABASE_URL: postgresql://postgres:password@postgres:5432/notes_db
    NODE_ENV: development
  depends_on:
    - postgres
  volumes:
    - ./:/app
    - /app/node_modules
  networks:
    - app-network

volumes:
postgres_data:

networks:
app-network:
  driver: bridge
